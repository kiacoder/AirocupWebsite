{% extends "global/base.html" %} {% block title %}ایجاد تیم جدید{% endblock %}
{% block body %}
<div class="container" style="margin: 2rem auto">
  <div class="form-container form-container--medium">
    <form
      method="POST"
      id="create-team-form"
      action="{{ url_for('client.create_team') }}"
      novalidate
    >
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

      <h1 class="form-title">ایجاد تیم جدید</h1>
      <p class="form-subtitle">
        برای شروع، اطلاعات تیم و مشخصات سرپرست (اولین عضو) را وارد کنید.
      </p>

      <fieldset
        style="
          border: 1px solid var(--color-border);
          padding: 1.5rem;
          border-radius: var(--border-radius);
          margin-bottom: 2rem;
        "
      >
        <legend
          style="
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-primary);
            padding: 0 10px;
          "
        >
          ۱. اطلاعات تیم
        </legend>
        <div class="form-group">
          <label for="team_name"
            >نام تیم<span class="required-star">*</span></label
          >
          <input
            type="text"
            id="team_name"
            name="team_name"
            class="form-control"
            required
            autofocus
            maxlength="30"
            placeholder="مثال: قهرمانان آینده"
          />
        </div>
      </fieldset>

      <fieldset
        style="
          border: 1px solid var(--color-border);
          padding: 1.5rem;
          border-radius: var(--border-radius);
          margin-bottom: 2rem;
        "
      >
        <legend
          style="
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-primary);
            padding: 0 10px;
          "
        >
          ۲. اطلاعات سرپرست تیم
        </legend>
        <p
          class="form-subtitle"
          style="font-size: 0.9rem; margin-bottom: 1.5rem"
        ></p>
        {% with id_prefix='add-', member_data=None, form_data=request.form %} {%
        include 'client/member_form_fields.html' %} {% endwith %}
      </fieldset>

      <div class="form-group" style="margin-top: 2rem">
        <button type="submit" class="btn btn-primary btn--full-width">
          <i class="fas fa-check" style="margin-left: 8px"></i> ایجاد تیم و
          ادامه
        </button>
      </div>
    </form>

    <div
      style="
        text-align: center;
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--color-border);
      "
    >
      <p style="margin-bottom: 1rem; color: var(--color-text-muted)">
        پس از ایجاد تیم، به داشبورد خود منتقل می‌شوید تا سایر اعضا را اضافه
        کنید.
      </p>
      <a
        href="{{ url_for('client.dashboard') }}"
        class="btn btn-secondary"
        style="margin-top: 0"
      >
        <i class="fas fa-arrow-right" style="margin-left: 8px"></i> انصراف و
        بازگشت به داشبورد
      </a>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %} {{ super() }}
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("create-team-form");
    if (!form || !window.airocupApp) return;
    try {
      window.airocupApp.formHelpers.initializeDynamicSelects(form);
      window.airocupApp.formHelpers.setupDatePicker(form);
    } catch (error) {
      console.error("Failed to initialize create team form:", error);
    }
  });
</script>
{% endblock %}
