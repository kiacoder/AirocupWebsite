{% extends "global/base.html" %}

{% block title %}تنظیم رمز عبور جدید | آیروکاپ{% endblock %}

{% block body %}
<div class="app-container">
  <div class="form-container form-container--small">
    <form
      method="POST"
      id="resetPasswordForm"
      action="{{ url_for('client.reset_password', token=token) }}"
      novalidate
    >
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

      <h1 class="form-title">تنظیم رمز عبور جدید</h1>
      <p class="form-subtitle">
        اکنون می‌توانید رمز عبور جدید خود را وارد کنید.
      </p>

      <div class="form-group">
        <label for="new_password">رمز عبور جدید:</label>
        <div class="password-wrapper">
          <input
            type="password"
            id="new_password"
            name="new_password"
            required
            autocomplete="new-password"
            autofocus
            dir="ltr"
          />
          <button
            type="button"
            class="password-toggle"
            data-action="toggle-password"
            data-target="#new_password"
            aria-label="نمایش یا مخفی کردن رمز عبور"
          >
            <i class="fas fa-eye-slash"></i>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="confirm_password">تکرار رمز عبور جدید:</label>
        <div class="password-wrapper">
          <input
            type="password"
            id="confirm_password"
            name="confirm_password"
            required
            autocomplete="new-password"
            dir="ltr"
          />
          <button
            type="button"
            class="password-toggle"
            data-action="toggle-password"
            data-target="#confirm_password"
            aria-label="نمایش یا مخفی کردن رمز عبور"
          >
            <i class="fas fa-eye-slash"></i>
          </button>
        </div>
      </div>

      <div
        id="password-strength-validator"
        class="password-requirements"
        aria-live="polite"
      >
        <p>رمز عبور باید شامل موارد زیر باشد:</p>
        <ul>
          <li id="req-length" class="invalid">حداقل ۸ کاراکتر</li>
          <li id="req-upper" class="invalid">حداقل یک حرف بزرگ انگلیسی</li>
          <li id="req-lower" class="invalid">حداقل یک حرف کوچک انگلیسی</li>
          <li id="req-number" class="invalid">حداقل یک عدد (۰–۹)</li>
          <li id="req-special" class="invalid">حداقل یک کاراکتر خاص (!@#$...)</li>
        </ul>
      </div>

      <div class="form-group">
        <button type="submit" class="btn btn-primary btn--full-width">
          ذخیره رمز عبور جدید
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
{% endblock %}
