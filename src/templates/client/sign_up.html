{% extends "global/base.html" %}

{% block title %}ایجاد حساب کاربری | آیروکاپ{% endblock %}

{% block body %}
<main class="app-container">
  <div class="form-container form-container--small">

    <form method="POST" id="signUpForm" action="{{ url_for('client.signup') }}" novalidate>
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

      <h1 class="form-title">ایجاد حساب کاربری جدید</h1>
      <p class="form-subtitle">
        برای تکمیل ثبت‌نام، یک کد تأیید به شماره موبایل شما ارسال خواهد شد.
      </p>

      <!-- EMAIL -->
      <div class="form-group">
        <label for="email">ایمیل <span class="required-star">*</span></label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="ایمیل خود را وارد کنید"
          required
          dir="ltr"
          value="{{ form_values.email or '' }}"
          autocomplete="email"
        />
      </div>

      <!-- PHONE -->
      <div class="form-group">
        <label for="phone_number">شماره موبایل <span class="required-star">*</span></label>
        <input
          type="tel"
          id="phone_number"
          name="phone_number"
          placeholder="09123456789"
          required
          dir="ltr"
          value="{{ form_values.phone_number or '' }}"
          autocomplete="tel"
        />
      </div>

      <!-- EDUCATION -->
      <div class="form-group">
        <label for="education_level">مقطع تحصیلی <span class="required-star">*</span></label>
        <select id="education_level" name="education_level" class="form-control" required>
          <option value="" disabled {% if not form_values.education_level %}selected{% endif %}>انتخاب کنید...</option>
          <option value="ابتدایی" {% if form_values.education_level == 'ابتدایی' %}selected{% endif %}>ابتدایی</option>
          <option value="متوسطه اول" {% if form_values.education_level == 'متوسطه اول' %}selected{% endif %}>متوسطه اول</option>
          <option value="متوسطه دوم" {% if form_values.education_level == 'متوسطه دوم' %}selected{% endif %}>متوسطه دوم</option>
          <option value="دانشجویی" {% if form_values.education_level == 'دانشجویی' %}selected{% endif %}>دانشجویی</option>
          <option value="آزاد" {% if form_values.education_level == 'آزاد' %}selected{% endif %}>آزاد</option>
        </select>
      </div>

      <!-- PASSWORD -->
      <div class="form-group">
        <label for="password">رمز عبور <span class="required-star">*</span></label>
        <div class="password-wrapper">
          <input
            type="password"
            id="password"
            name="password"
            required
            dir="ltr"
            autocomplete="new-password"
          />
          <button type="button" class="password-toggle" data-action="toggle-password" data-target="#password">
            <i class="fas fa-eye-slash"></i>
          </button>
        </div>
      </div>

      <!-- CONFIRM PASSWORD -->
      <div class="form-group">
        <label for="confirm_password">تکرار رمز عبور <span class="required-star">*</span></label>
        <div class="password-wrapper">
          <input
            type="password"
            id="confirm_password"
            name="confirm_password"
            required
            dir="ltr"
            autocomplete="new-password"
          />
          <button type="button" class="password-toggle" data-action="toggle-password" data-target="#confirm_password">
            <i class="fas fa-eye-slash"></i>
          </button>
        </div>
      </div>

      <!-- PASSWORD REQUIREMENTS -->
      <div id="password-strength-validator" class="password-requirements" aria-live="polite">
        <p>رمز عبور باید شامل موارد زیر باشد:</p>
        <ul>
          <li id="req-length" class="invalid">حداقل ۸ کاراکتر</li>
          <li id="req-upper" class="invalid">حداقل یک حرف بزرگ انگلیسی</li>
          <li id="req-lower" class="invalid">حداقل یک حرف کوچک انگلیسی</li>
          <li id="req-number" class="invalid">حداقل یک عدد (۰–۹)</li>
          <li id="req-special" class="invalid">حداقل یک کاراکتر خاص (!@#$...)</li>
        </ul>
      </div>

      <!-- SUBMIT -->
      <div class="form-group">
        <button type="submit" class="btn btn-primary btn--full-width">
          ایجاد حساب
        </button>
      </div>

      <!-- FOOTER LINKS -->
      <div class="form-links">
        <p>
          قبلاً ثبت‌نام کرده‌اید؟  
          <a href="{{ url_for('client.login_client') }}">از اینجا وارد شوید</a>.
        </p>
      </div>
    </form>
  </div>
</main>
{% endblock %}

{% block scripts %}
{{ super() }}
{# All JS removed. main.js handles password validation and toggles via the initializeSignUpForm function. #}
{% endblock %}