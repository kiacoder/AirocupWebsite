{% extends "global/base.html" %}

{% block title %}ویرایش مقاله | پنل آیروکاپ{% endblock %}

{% block body %}
<div class="admin-page">
  <header class="admin-page__header">
    <div class="admin-page__title">
      <h1>ویرایش مقاله</h1>
      <p class="admin-page__subtitle">
        تغییرات موردنظر را روی مقاله «{{ article.title }}» اعمال و ذخیره کنید.
      </p>
    </div>
    <div class="admin-page__actions">
      <a href="{{ url_for('admin.admin_manage_news') }}" class="btn btn-secondary">
        <i class="fas fa-arrow-right"></i>
        بازگشت به لیست مقالات
      </a>
    </div>
  </header>

  <section class="admin-page__section">
    <article class="admin-surface">
      <header class="admin-surface__header">
        <div class="admin-surface__title">
          <h2><i class="fas fa-pen"></i> جزییات مقاله</h2>
          <p>عنوان، محتوا و تصویر شاخص خبر را ویرایش کنید.</p>
        </div>
      </header>
      <div class="admin-surface__body">
        <form
          method="POST"
          action="{{ url_for('admin.admin_edit_news', article_id=article.news_id) }}"
          enctype="multipart/form-data"
          class="admin-form"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

          <div class="form-group">
            <label for="Title">عنوان مقاله</label>
            <input type="text" id="Title" name="title" required value="{{ article.title }}" />
          </div>

          <div class="form-group">
            <label for="Content">محتوای مقاله</label>
            <textarea id="Content" name="content" rows="6" required>{{ article.content }}</textarea>
          </div>

          <div class="form-group">
            <label for="Link">لینک خبر (اختیاری)</label>
            <input type="text" id="Link" name="link" value="{{ article.link or '' }}" placeholder="https://example.com" dir="ltr" />
            <p class="form-helper-text">در صورت وارد کردن لینک، کاربر با کلیک روی خبر به این آدرس هدایت می‌شود.</p>
          </div>

          <div class="form-group">
            <label for="TemplatePath">مسیر قالب اختصاصی (اختیاری)</label>
            <input type="text" id="TemplatePath" name="template_path" value="{{ article.template_path }}" placeholder="مثال: custom_article.html" />
          </div>

          <div class="form-group">
            <label for="HtmlUpload">آپلود فایل HTML سفارشی</label>
            <input type="file" id="HtmlUpload" name="html_file" accept=".html" class="upload-input" />
          </div>

          <div class="form-group">
            <label for="Image">تصویر مقاله (اختیاری)</label>
            <input type="file" id="Image" name="image" accept="image/png, image/jpeg, image/gif" class="upload-input" />
            {% if article.image_path %}
            <p class="form-helper-text">تصویر فعلی: {{ article.image_path }}</p>
            {% endif %}
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i>
              ذخیره تغییرات
            </button>
            <a href="{{ url_for('admin.admin_manage_news') }}" class="btn btn-secondary">
              انصراف
            </a>
          </div>
        </form>
      </div>
    </article>
  </section>
</div>
{% endblock %}
